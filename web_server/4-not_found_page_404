#!/usr/bin/env bash
# Script to configure Nginx with a custom 404 error page

sudo apt-get update -y

sudo apt-get install nginx -y

echo "<html>
<head><title>404 Not Found</title></head>
<body>
<h1>404 Not Found</h1>
<p>Ceci n'est pas une page</p>
</body>
</html>" | sudo tee /var/www/html/404.html > /dev/null

sudo sed -i '/server {/a \    error_page 404 /404.html;' /etc/nginx/sites-available/default

sudo nginx -t

if [ $? -eq 0 ]; then
    sudo systemctl reload nginx
    echo "Nginx configuration updated and reloaded successfully!"
else
    echo "Error: Nginx configuration failed. Please check the syntax."
    exit 1
fi

curl -I localhost/this-page-does-not-exist

